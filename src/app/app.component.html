<div class="app-container {{lightTheme?'light-theme':''}}">
    <md-toolbar color="primary">
        <button md-icon-button (click)="sidenav.toggle()">
            <md-icon>menu</md-icon>
        </button>
        <h1>FFXIV Team Craft</h1>

        <md-menu #langMenu="mdMenu" yPosition="above">
            <button md-menu-item (click)="use('fr')">FR</button>
            <button md-menu-item (click)="use('en')">EN</button>
            <button md-menu-item (click)="use('de')">DE</button>
        </md-menu>

        <button md-button [mdMenuTriggerFor]="langMenu">
            {{locale | uppercase}}
        </button>
    </md-toolbar>
    <md-card class="announcement" *ngIf="showAnnouncement()">
        <md-grid-list cols="5" rowHeight="35px">
            <md-grid-tile colspan="4">
                <p [innerHTML]="announcement"></p>
            </md-grid-tile>
            <md-grid-tile>
                <button md-icon-button color="accent" (click)="dismissAnnouncement()">
                    <md-icon>clear</md-icon>
                </button>
            </md-grid-tile>
        </md-grid-list>
    </md-card>
    <p class="version {{lightTheme?'':'light-text'}}">{{version}}</p>
    <md-sidenav-container>
        <md-sidenav mode="over" #sidenav>
            <div class="user-box">
                <div class="user">
                    <md-icon *ngIf="(authState | async)?.isAnonymous">person</md-icon>
                    <img *ngIf="!((authState | async)?.isAnonymous)" src="{{userIcon}}" alt="avatar">
                    <p class="name">{{username}}</p>
                </div>
                <div *ngIf="(authState | async)?.isAnonymous">
                    <button md-raised-button (click)="openLoginPopup()">{{'Login' | translate}}</button>
                    <button md-raised-button (click)="openRegistrationPopup()">{{'Registration' | translate}}</button>
                </div>
                <button md-raised-button *ngIf="!(authState | async)?.isAnonymous" (click)="disconnect()">{{'Disconnect'
                    | translate}}
                </button>
            </div>
            <md-divider></md-divider>
            <md-nav-list>
                <a md-list-item routerLink="/recipes" (click)="sidenav.close()">{{'Recipes' | translate}}</a>
                <a md-list-item routerLink="/lists" (click)="sidenav.close()">{{'Lists' | translate}}</a>
            </md-nav-list>
            <md-slide-toggle class="sidebar-element" [(ngModel)]="lightTheme" (change)="saveTheme()">Light Theme
            </md-slide-toggle>
            <div class="spacer"></div>
            <div class="sidebar-element social-icons">
                <a target="_blank" href="https://discord.gg/r6qxt6P" md-icon-button><img
                    class="icon"
                    src="https://camo.githubusercontent.com/8593f18483b8bc603725d988c3fba1d728bc27d4/68747470733a2f2f646973636f72646170702e636f6d2f6173736574732f32633231616564613136646533353462613533333435353161383833623438312e706e67"
                    alt="discord"></a>
                <a target="_blank" href="https://www.facebook.com/FFXIVTeamcraft/" md-icon-button><img class="icon"
                                                                                                       src="https://facebookbrand.com/wp-content/themes/fb-branding/prj-fb-branding/assets/images/fb-art.png"
                                                                                                       alt="facebook"></a>
                <a target="_blank" href="https://github.com/supamiu/ffxiv-teamcraft" md-icon-button><img class="icon"
                                                                                                         src="https://github.com/fluidicon.png"
                                                                                                         alt="Github"></a>
            </div>
            <a md-raised-button href="https://www.reddit.com/r/ffxivteamcraft/" target="_blank" color="warn"
               class="report-bug">Report a bug</a>
        </md-sidenav>
        <div class="my-content">
            <div class="content">
                <div class="content-middle">
                    <router-outlet></router-outlet>
                </div>
            </div>
        </div>
    </md-sidenav-container>
</div>
