<div fxLayout="row" fxLayoutGap="5px">
  <button nz-button (click)="newGearset()">{{'GEARSETS.New_gearset' | translate}}</button>
  <button nz-button (click)="importAriyalaGearset()">{{'GEARSETS.Import_from_ariyala' | translate}}</button>
  <button nz-button (click)="importLodestoneGearset()">{{'GEARSETS.Import_from_lodestone' | translate}}</button>
  <button nz-button (click)="importFromPcap()">{{'GEARSETS.Import_using_pcap' | translate}}</button>
</div>

<nz-divider nzOrientation="left" [nzText]="'GEARSETS.Your_gearsets' | translate"></nz-divider>


<ng-container *ngIf="userId$ | async as userId">
  <ng-template #gearsetTemplate let-gearset>
    <div class="gearset-row" cdkDrag fxLayout="row" fxLayoutGap="5px" fxLayoutAlign="flex-start center">
      <div [innerHTML]="gearset.job | jobUnicode" class="companion-svg job-icon"></div>
      <div>{{gearset.name}}</div>
      <div fxFlex="1 1 auto"></div>
      <a nz-button routerLink="/gearset/{{gearset.$key}}" nzShape="circle" nz-tooltip [nzTitle]="'GEARSETS.View_gearset' | translate">
        <i nz-icon nzType="eye" nzTheme="outline"></i>
      </a>
      <a nz-button routerLink="/gearset/{{gearset.$key}}/edit" *ngIf="gearset.authorId === userId" nzShape="circle" nz-tooltip
         [nzTitle]="'GEARSETS.Edit_gearset' | translate">
        <i nz-icon nzType="edit" nzTheme="outline"></i>
      </a>
      <button nz-button *ngIf="gearset.authorId === userId" nzType="danger"
              nz-popconfirm [nzPopconfirmTitle]="'Confirmation' | translate" nzShape="circle"
              nz-tooltip [nzTitle]="'GEARSETS.Delete_gearset' | translate"
              (nzOnConfirm)="deleteGearset(gearset.$key)">
        <i nz-icon nzType="delete" nzTheme="outline"></i>
      </button>
    </div>
  </ng-template>

  <div cdkDropList class="gearsets-list" *ngIf="gearsets$ | async as gearsets" fxLayout="column" fxLayoutGap="10px">
    <ng-container *ngFor="let gearset of gearsets">
      <ng-container *ngTemplateOutlet="gearsetTemplate;context:{$implicit: gearset}"></ng-container>
    </ng-container>
    <app-folder *ngFor="let folder of folders$ | async" [display]="folder" [elementTemplate]="gearsetTemplate" cdkDrag>
    </app-folder>
  </div>
</ng-container>
